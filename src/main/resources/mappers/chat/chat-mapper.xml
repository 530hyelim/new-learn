<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="chat">
	<!-- 친구 목록 조회 -->
	<select id="selectFriendList" resultMap="friendListResultMap">
		SELECT
		    M.USER_NO,
		    I.CHANGE_NAME,
		    M.USER_NAME,
		    MP.STATUS_MESSAGE
		FROM FRIEND F
		LEFT JOIN MEMBER M ON F.FRIEND_USER_NO = M.USER_NO
		LEFT JOIN MYPAGE MP ON F.FRIEND_USER_NO = MP.USER_NO
		LEFT JOIN MYPAGE_IMG MPI ON MP.MYPAGE_NO = MPI.MYPAGE_NO AND TYPE='profile'
		LEFT JOIN IMAGE I ON MPI.IMG_NO = I.IMG_NO
		WHERE F.USER_NO = #{userNo} AND F.RESPONSE_STATUS = '수락'
	</select>
	<resultMap type="friendDTO" id="friendListResultMap">
		<id column="user_no" property="userNo"/>
		<result column="change_name" property="changeName"/>
		<result column="user_name" property="userName"/>
		<result column="status_message" property="statusMessage"/>
	</resultMap>
	
	채팅방 목록 조회
	<select id="selectChattingRoomList" resultType="ChattingRoom">
			
	</select>
	
<!-- 	
	채팅방 생성
	<insert id="createRoom">
		
	</insert>
	
	친구 프로필 조회
	<select id="friendProfile">
	
	</select> -->
</mapper>